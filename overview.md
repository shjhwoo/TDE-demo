# TDE ν•µμ‹¬

1. μ–΄ν”λ¦¬μΌ€μ΄μ… μ½”λ“λ” μμ • ν•„μ” X
2. ν‚¤λ¥Ό μ–΄λ–»κ² κ΄€λ¦¬λ¥Ό ν• κ²ƒμΈκ°€

# Data at Rest Encryption

# Key Management Plugin

μ•”νΈν™” ν‚¤ κ΄€λ¦¬λ¥Ό μ–΄λ–»κ² ν• μ§€ κ²°μ •ν•λ” ν”λ¬κ·ΈμΈ

# InnoDB Tablespace Encryption

μ‹¤μ  λ°μ΄ν„° μ €μ¥λλ” .ibd νμΌ μ•”νΈν™” μ„¤μ •

- μ κ³µν•λ” κΈ°λ¥λ“¤

- ν™μ© κ°€λ¥ν• λ°©ν–¥λ“¤ + λ°λ¨

- λ ν”λ¦¬μΌ€μ΄μ… + κ°λ λΌ

* μ•”νΈν™” ν‚¤μ λ™κΈ°ν™”, μ΄μμƒ λ¨λ“ λ…Έλ“κ°€ λ™μΌν• ν‚¤ νμΌμ„ λ°”λΌλ³΄κ² κµ¬μ„±
* λ°μ΄ν„° νμΌλΏ μ•„λ‹λΌ λ„¤νΈμ›ν¬λ¥Ό νƒ€κ³  λ„μ–΄κ°€λ” Binary logλ„ μ•”νΈν™”ν•΄μ•Ό ν•¨..

- μ μ©μ „ν›„ μ¤λ²„ν—¤λ“
  sysbench

# μ„Έν…κ³Όμ •

0. λ””λ ‰ν† λ¦¬ μ„Έν…

```
mariadb-tde-demo/
β”β”€β”€ docker-compose.yml
β”β”€β”€ config/
β”‚   β””β”€β”€ my.cnf          # TDE μ„¤μ • νμΌ
β”β”€β”€ keys/
β”‚   β”β”€β”€ keys.txt        # (μ„μ‹) ν‰λ¬Έ ν‚¤ νμΌ (μƒμ„± ν›„ μ‚­μ  μμ •)
β”‚   β”β”€β”€ keys.enc        # (μ‹¤μ ) μ•”νΈν™”λ ν‚¤ νμΌ
β”‚   β””β”€β”€ password        # ν‚¤ νμΌμ„ ν’€κΈ° μ„ν• λΉ„λ°€λ²νΈ
β””β”€β”€ data/               # DB λ°μ΄ν„° μ €μ¥μ† (μλ™ μƒμ„±λ¨)
```

1. docker μ΄λ―Έμ§€ μ‘μ„±

2. my.cnf μ„Έν…ν•κΈ°

3. ν‚¤ νμΌμ„ μƒμ„±ν•λ‹¤

```
# 1. keys ν΄λ”λ΅ μ΄λ™
cd keys

# 2. μ•”νΈν™”μ— μ‚¬μ©ν•  λΉ„λ°€λ²νΈ νμΌ μƒμ„± (λ‚΄μ©: mysecretpassword)
echo -n "mysecretpassword" > password

# 3. ν‰λ¬Έ ν‚¤ νμΌ μƒμ„± (ν•μ‹: ν‚¤ID;32λ°”μ΄νΈ_Hex_ν‚¤κ°’)
# μ•„λλ” μμ‹ ν‚¤μ…λ‹λ‹¤. (ID 1λ², 2λ² ν‚¤ μƒμ„±)
echo "1;5A2B3C4D5E6F708192A3B4C5D6E7F8091A2B3C4D5E6F708192A3B4C5D6E7F809" > keys.txt
echo "2;908F7E6D5C4B3A291807F6E5D4C3B2A1908F7E6D5C4B3A291807F6E5D4C3B2A1" >> keys.txt

# 4. keys.txtλ¥Ό OpenSSLμ„ μ΄μ©ν•΄ keys.encλ΅ μ•”νΈν™”
# (CBC λ¨λ“ μ‚¬μ©, λΉ„λ°€λ²νΈλ” password νμΌ μ°Έμ΅°)
openssl enc -aes-256-cbc -md sha1 -kfile password -in keys.txt -out keys.enc

# 5. λ³΄μ•μ„ μ„ν•΄ ν‰λ¬Έ ν‚¤ νμΌ μ‚­μ  (μ‹¤λ¬΄ μµκ΄€)
rm keys.txt
```

4. DB μ‹¤ν–‰

```
-- 1. λ°μ΄ν„°λ² μ΄μ¤ μ„ νƒ
USE demoDB;

-- 2. ν…μ¤νΈ ν…μ΄λΈ” μƒμ„± (InnoDB μ—”μ§„ ν•„μ)
CREATE TABLE CreditCards (
Id INT PRIMARY KEY AUTO_INCREMENT,
OwnerName VARCHAR(50),
CardNumber VARCHAR(20)
);

-- 3. λ―Όκ°ν• λ°μ΄ν„° μ‚½μ…demoDB
INSERT INTO CreditCards (OwnerName, CardNumber) VALUES
('Cheolsu Kim', '1234-5678-9012-3456'),
('Younghee Lee', '9876-5432-1098-7654');

-- 4. λ°μ΄ν„°κ°€ μ λ“¤μ–΄κ°”λ‚ ν™•μΈ (ν¬λ…μ„± ν™•μΈ)
SELECT \* FROM CreditCards;

-- 5. μ•”νΈν™” μ μ©μ—¬λ¶€ ν™•μΈ
SELECT `NAME`, ENCRYPTION_SCHEME, ROTATING_OR_FLUSHING
FROM information_schema.INNODB_TABLESPACES_ENCRYPTION
WHERE `NAME` LIKE 'demoDB/CreditCards';
```

κ²°κ³Ό:

```
{
	"table": "INNODB_TABLESPACES_ENCRYPTION",
	"rows":
	[
		{
			"NAME": "demodb/CreditCards",
			"ENCRYPTION_SCHEME": 1, -- μ•”νΈν™”λμ—λ‹¤λ” μλ―Έμ΄λ‹¤.
			"ROTATING_OR_FLUSHING": 0
		}
	]
}
```

- μ—¬κΈ°μ„ ibd νμΌμ€ λ­”κ°€μ”?

```
μ§κ΄€μ μΈ λΉ„μ  (μ—‘μ…€)
MariaDB ν”„λ΅κ·Έλ¨: μ—‘μ…€(Excel) μ†ν”„νΈμ›¨μ–΄ κ·Έ μμ²΄μ…λ‹λ‹¤.

ν…μ΄λΈ”(Table): μ—‘μ…€ μ•μ— μλ” **'μ‹νΈ(Sheet)'**μ…λ‹λ‹¤.

.ibd νμΌ: λ‚΄ μ»΄ν“¨ν„° ν•λ“λ””μ¤ν¬μ— μ €μ¥λ 2024λ…„_κ°€κ³„λ¶€.xlsx νμΌμ…λ‹λ‹¤.

μ°λ¦¬κ°€ μ—‘μ…€μ„ λ„λ©΄ ν™”λ©΄μ—μ„λ” μ‚¬λΌμ§€μ§€λ§ ν•λ“λ””μ¤ν¬μ— .xlsx νμΌμ€ λ‚¨μ•„μμ£ ? λ§μ°¬κ°€μ§€λ΅ DBλ¥Ό κΊΌλ„ λ°μ΄ν„°κ°€ μ‚¬λΌμ§€μ§€ μ•λ” μ΄μ λ” μ΄ .ibd νμΌμ— κΈ°λ΅λμ–΄ μκΈ° λ•λ¬Έμ…λ‹λ‹¤.
```

## λ§μ•½μ— λ‚΄κ°€ νΉμ •ν• ν…μ΄λΈ” λ°μ΄ν„°λ§ μ•”νΈν™” ν•κ³  μ‹¶λ‹¤λ©΄?

```
-- ν„μ¬ μƒνƒ ν™•μΈ (μ•„λ§ FORCEλ΅ λμ–΄ μμ„ κ²λ‹λ‹¤)
SHOW VARIABLES LIKE 'innodb_encrypt_tables';

-- μ•”νΈν™” μ •μ±…μ„ 'FORCE'μ—μ„ 'ON'μΌλ΅ λ³€κ²½
-- ON: κΈ°λ³Έμ μΌλ΅ μ•”νΈν™”ν•λ, μ›ν•λ©΄ λΊ„ μ μμ (Opt-out κ°€λ¥)
SET GLOBAL innodb_encrypt_tables = 'ON';

* λλ” innodb_file_per_table=ON λ¥Ό my.cnfμ— μ§€μ • (λ€μ‹ μ— innodb_encrypt_tables = FORCE μ£Όμ„μ²λ¦¬)

```

USE demoDB;

-- 1. μ•”νΈν™” ν…μ΄λΈ” (κΈ°λ³Έκ°’ or λ…μ‹μ  μ§€μ •)
CREATE TABLE TSecure (
Msg VARCHAR(100)
) ENGINE=InnoDB ENCRYPTED='YES';

-- 2. μΌλ°(ν‰λ¬Έ) ν…μ΄λΈ” (ENCRYPTED='N' μµμ… μ‚¬μ©)
CREATE TABLE TPlain (
Msg VARCHAR(100)
) ENGINE=InnoDB;

INSERT INTO TSecure VALUES ('MySecretPassword_SECURE');
INSERT INTO TPlain VALUES ('MySecretPassword_PLAIN');

```
ALTER TABLE TPlain ENCRYPTED='YES';

β οΈ μ£Όμμ‚¬ν•­ (μ¤λ²„ν—¤λ“ λ°μƒ)
μ΄ κ³Όμ •μ€ ν…μ΄λΈ”μ λ¨λ“  λ°μ΄ν„°λ¥Ό μ½κ³  μ“°λ” I/O μ§‘μ•½μ μΈ μ‘μ—…μ…λ‹λ‹¤.

μ‹κ°„ μ†μ”: ν…μ΄λΈ” ν¬κΈ°κ°€ ν΄μλ΅ μ™„λ£λλ” λ° μ‹κ°„μ΄ μ¤λ κ±Έλ¦½λ‹λ‹¤.

λ””μ¤ν¬ κ³µκ°„: μΌμ‹μ μΌλ΅ κΈ°μ΅΄ νμΌκ³Ό μƒ νμΌμ΄ λ¨λ‘ μ΅΄μ¬ν•΄μ•Ό ν•λ―€λ΅, ν…μ΄λΈ” ν¬κΈ°μ μ•½ 2λ°°μ— ν•΄λ‹Ήν•λ” λ””μ¤ν¬ κ³µκ°„μ΄ ν•„μ”ν•©λ‹λ‹¤.

λ½(Lock): ALTER TABLEμ΄ μ‹¤ν–‰λλ” λ™μ• ν•΄λ‹Ή ν…μ΄λΈ”μ—λ” **λ°°νƒ€μ  λ½(Exclusive Lock)**μ΄ κ±Έλ ¤ ν…μ΄λΈ”μ„ μ‚¬μ©ν•  μ μ—†λ” λ‹¤μ΄νƒ€μ„μ΄ λ°μƒν•  μ μμµλ‹λ‹¤.

λ”°λΌμ„ μ‹¤μ  μ΄μ ν™κ²½μ—μ„ λ€μ©λ‰ ν…μ΄λΈ”μ— μ•”νΈν™”λ¥Ό μ μ©ν•  λ•λ” μ„λΉ„μ¤ μν–¥λ„λ¥Ό μµμ†ν™”ν•κΈ° μ„ν• λ³„λ„μ μ „λµ(μ: μ¨λΌμΈ DDL ν΄ μ‚¬μ© λ“±)μ„ κ³ λ ¤ν•΄μ•Ό ν•©λ‹λ‹¤.

* μ΄λ―Έ μ•”νΈν™”λ ν…μ΄λΈ”μ„ λ³µνΈν™” ν•λ” κ±΄ λ‹¨μν ALTER TABLEλ΅λ” λ¶κ°€ν•λ‹¤ .
* κ·Έλ°λ° λΉ„ μ•”νΈν™”λ ν…μ΄λΈ”μ„ μ•”νΈν™” ν•λ”κ±΄
ALTER TABLE {ν…μ΄λΈ”μ΄λ¦„} ENCRYPTED = 'YES'; λ΅λ„ μ¶©λ¶„ν κ°€λ¥ν•λ‹¤.

```

---

DevOps μμ—­μ μ—…λ¬΄λ¥Ό λ§΅κ² λμ…”μ„ λ¶€λ‹΄μ΄ μμΌμ‹κ² μ§€λ§, TDE(Transparent Data Encryption)λ” κ°λ…μ„ μ΅κ³  λ‚λ©΄ μ„¤μ • μμ²΄λ” λ§λ²•μ²λΌ λ³µμ΅ν•μ§€λ” μ•μµλ‹λ‹¤. **ν•µμ‹¬μ€ "μ• ν”λ¦¬μΌ€μ΄μ… μ½”λ“λ” μμ •ν•  ν•„μ”κ°€ μ—†λ‹¤(Transparent)"λ” μ κ³Ό "ν‚¤ κ΄€λ¦¬(Key Management)"**μ…λ‹λ‹¤.

11/26(μ) μ¤‘κ°„ μ κ²€κ³Ό 12/4(λ©) μµμΆ… λ°ν‘κΉμ§€ λ‚¨μ€ μ‹κ°„μ„ κ³ λ ¤ν•μ—¬, **λ‹¨κ³„λ³„ λ¦¬μ„μΉ λ° μ¤€λΉ„ λ΅λ“λ§µ**μ„ μ •λ¦¬ν•΄ λ“λ¦½λ‹λ‹¤.

---

### π“… μ „μ²΄ μΌμ • λ΅λ“λ§µ

- **Today ~ 11/24(μΌ):** TDE κΈ°λ³Έ κ°λ… ν•™μµ, λ΅μ»¬(Docker)μ—μ„ λ‹¨μΌ DB μ•”νΈν™” μ„±κ³µ λ° κ²€μ¦ (μ¤‘κ°„ μ κ²€ μ¤€λΉ„ μ™„λ£)
- **11/25(ν™”):** μ¤‘κ°„ μ κ²€μ© μ¥ν‘(1~2μ¥) λ° λ°λ¨ μ‹λ‚λ¦¬μ¤ μ •λ¦¬
- **11/26(μ) 09:30:** **[μ¤‘κ°„ μ κ²€ λ―Έν…]**
- **11/27(λ©) ~ 11/29(ν† ):** λ¦¬ν”λ¦¬μΌ€μ΄μ…/κ°λ λΌ ν™κ²½μ—μ„μ TDE κµ¬μ„± ν…μ¤νΈ
- **11/30(μΌ) ~ 12/1(μ›”):** `sysbench` λ“±μ„ μ΄μ©ν• μ„±λ¥(μ¤λ²„ν—¤λ“) λΉ„κµ ν…μ¤νΈ
- **12/2(ν™”) ~ 12/3(μ):** μµμΆ… λ°ν‘ μλ£ μ‘μ„± λ° λ°λ¨ λ¦¬ν—μ„¤
- **12/4(λ©) ~ 12/5(κΈ):** **[μµμΆ… λ°ν‘]**

---

### π€ Phase 1. κΈ°λ³ΈκΈ° & λ‹¨μΌ λ…Έλ“ λ°λ¨ (μ§€κΈ ~ 11/26)

μ΄ λ‹¨κ³„μ λ©ν‘λ” **"TDEλ¥Ό μΌ°λ”λ‹ DB νμΌμ΄ μ§„μ§ μ•”νΈν™”λλ”λΌ, ν•μ§€λ§ Selectλ” μ λλ”λΌ"**λ¥Ό λμΌλ΅ ν™•μΈν•λ” κ²ƒμ…λ‹λ‹¤.

#### 1. λ¦¬μ„μΉ ν•µμ‹¬ ν‚¤μ›λ“

MariaDB κ³µμ‹ λ¬Έμ„λ¥Ό λ³Ό λ• λ‹¤μ ν‚¤μ›λ“ μ„μ£Όλ΅ λ³΄μ„Έμ”.

- **Data at Rest Encryption:** TDEμ μ •μ‹ λ…μΉ­μ…λ‹λ‹¤. (μ €μ¥λ λ°μ΄ν„° μ•”νΈν™”)
- **Key Management Plugin:** μ•”νΈν™” ν‚¤λ¥Ό μ–΄λ–»κ² κ΄€λ¦¬ν• μ§€ κ²°μ •ν•λ” ν”λ¬κ·ΈμΈμ…λ‹λ‹¤.
  - _λ°λ¨μ©:_ `File Key Management Plugin` (κ°€μ¥ μ‰½κ³  μ§κ΄€μ , νμΌμ— ν‚¤ μ €μ¥)
  - _μ‹¤λ¬΄μ©:_ AWS KMS Plugin λ“± (μ¤‘κ°„ μ κ²€ λ•λ” File λ°©μ‹μΌλ΅ λ¨Όμ € λ³΄μ—¬μ£Όμ„Έμ”)
- **InnoDB Tablespace Encryption:** μ‹¤μ  λ°μ΄ν„°κ°€ μ €μ¥λλ” `.ibd` νμΌ μ•”νΈν™” μ„¤μ •μ…λ‹λ‹¤.

#### 2. λ°λ¨ μ‹λ‚λ¦¬μ¤ (κ²€μ¦ λ°©λ²•)

κ°€μ¥ ν™•μ‹¤ν• μ‹κ°μ  ν¨κ³Όλ” **`strings` λ…λ Ήμ–΄**λ‚ **`hexdump`**λ¥Ό μ‚¬μ©ν•λ” κ²ƒμ…λ‹λ‹¤.

1.  **TDE μ μ© μ „:** ν…μ΄λΈ”μ— "MySecretCreditCard"λΌλ” λ°μ΄ν„°λ¥Ό λ„£λ”λ‹¤ -> DB λ°μ΄ν„° νμΌ(`table.ibd`)μ„ `strings` λ…λ Ήμ–΄λ΅ μ—΄μ–΄λ³Έλ‹¤ -> "MySecretCreditCard"κ°€ **κ·Έλ€λ΅ λ³΄μΈλ‹¤.** (μ¶©κ²© μ”λ²•)
2.  **TDE μ μ© ν›„:** μ„¤μ • νμΌ(`my.cnf`)μ— μ•”νΈν™” μµμ…μ„ μΌ λ‹¤ -> λ‘κ°™μ΄ λ°μ΄ν„°λ¥Ό λ„£κ±°λ‚ κΈ°μ΅΄ ν…μ΄λΈ”μ„ μ•”νΈν™”ν•λ‹¤ -> νμΌ μ‹μ¤ν…μ—μ„ `strings`λ΅ μ—΄μ–΄λ³Έλ‹¤ -> **λ°μ΄ν„°κ°€ κΉ¨μ Έμ„ μ• λ³΄μΈλ‹¤.**
3.  **SQL ν™•μΈ:** DB μ ‘μ†ν•΄μ„ `SELECT` ν•λ©΄ **μ λ³΄μΈλ‹¤.** (Transparent μ¦λ…)

#### 3. μ¤‘κ°„ μ κ²€ λ• λ³΄μ—¬μ¤„ κ²ƒ

> "ν„μ¬ λ΅μ»¬ Docker ν™κ²½μ—μ„ File Key Management ν”λ¬κ·ΈμΈμ„ μ‚¬μ©ν•΄ InnoDB ν…μ΄λΈ”μ¤νμ΄μ¤ μ•”νΈν™”μ— μ„±κ³µν–μµλ‹λ‹¤. OS λ λ²¨μ—μ„λ” λ°μ΄ν„° μ‹λ³„μ΄ λ¶κ°€λ¥ν•¨μ„ ν™•μΈν–μµλ‹λ‹¤."

---

### π› οΈ Phase 2. μ‹¬ν™” & μ΄μ ν™κ²½ κ³ λ ¤ (11/27 ~ 12/1)

μ΄μ ν™κ²½(λ¦¬ν”λ¦¬μΌ€μ΄μ…/κ°λ λΌ)κ³Ό μ„±λ¥ μ΄μλ” μ΄ λ‹¨κ³„μ—μ„ λ‹¤λ£Ήλ‹λ‹¤.

#### 1. λ¦¬ν”λ¦¬μΌ€μ΄μ… & κ°λ λΌ ν΄λ¬μ¤ν„° κ³ λ ¤ μ‚¬ν•­

μ΄ λ¶€λ¶„μ΄ μ μΌ κΉλ‹¤λ΅­μµλ‹λ‹¤. ν•µμ‹¬μ€ **"μ•”νΈν™” ν‚¤μ λ™κΈ°ν™”"**μ…λ‹λ‹¤.

- **λ…λ¦½μ  ν‚¤ κ΄€λ¦¬:** μ›μΉ™μ μΌλ΅ κ° λ…Έλ“λ” λ…λ¦½μ μ…λ‹λ‹¤. Masterμ™€ Slaveκ°€ μ„λ΅ λ‹¤λ¥Έ ν‚¤λ¥Ό κ°€μ§ μλ„ μμ§€λ§, μ΄μμƒ **λ¨λ“  λ…Έλ“κ°€ λ™μΌν• ν‚¤ νμΌ(νΉμ€ KMS κ²½λ΅)μ„ λ°”λΌλ³΄λ„λ΅ κµ¬μ„±**ν•λ” κ²ƒμ΄ μΌλ°μ μ…λ‹λ‹¤.
- **Binlog μ•”νΈν™”:** λ¦¬ν”λ¦¬μΌ€μ΄μ…μ„ ν•λ‹¤λ©΄ λ°μ΄ν„° νμΌλΏλ§ μ•„λ‹λΌ λ„¤νΈμ›ν¬λ¥Ό νƒ€κ³  λ„μ–΄κ°€λ” `Binary Log`λ„ μ•”νΈν™”ν•΄μ•Ό μ§„μ •ν• λ³΄μ•μ΄ μ™„μ„±λ©λ‹λ‹¤. (`encrypt_binlog` μµμ… ν™•μΈ)
- **Galera SST:** μƒλ΅μ΄ λ…Έλ“κ°€ ν•©λ¥ν•  λ• λ°μ΄ν„°λ¥Ό ν†µμ§Έλ΅ λ³µμ‚¬(SST)ν•λ”λ°, μ΄ κ³Όμ •μ—μ„ μ•”νΈν™”λ νμΌμ΄ λ„μ–΄κ°€λ―€λ΅ μ „μ†΅ κµ¬κ°„(SSL) λ³΄μ•λ„ ν•¨κ» μ–ΈκΈ‰ν•΄μ£Όλ©΄ μΆ‹μµλ‹λ‹¤.

#### 2. μ„±λ¥(Overhead) μΈ΅μ •

TDEλ” CPUλ¥Ό μ‚¬μ©ν•μ—¬ λ°μ΄ν„°λ¥Ό μ•”νΈν™”/λ³µνΈν™”ν•λ―€λ΅ CPU μ‚¬μ©λ‰μ΄ λμ–΄λ‚©λ‹λ‹¤.

- **ν΄:** `sysbench` (κ°€μ¥ λ€μ¤‘μ μΈ DB λ²¤μΉλ§ν‚Ή ν΄)
- **λΉ„κµ:** TDE Off μƒνƒ vs TDE On μƒνƒμ—μ„μ TPS(μ΄λ‹Ή νΈλμ­μ…) λ° Latency λΉ„κµ.
- **μμƒ κ²°κ³Ό:** λ³΄ν†µ 3~10% λ‚΄μ™Έμ μ¤λ²„ν—¤λ“κ°€ λ°μƒν•λ‹¤κ³  μ•λ ¤μ Έ μμµλ‹λ‹¤. μ΄ μμΉλ¥Ό μ§μ ‘ μΈ΅μ •ν•΄μ„ λ³΄μ—¬μ£Όλ©΄ λ² μ¤νΈμ…λ‹λ‹¤.

---

### π“ λ°ν‘ μλ£ κµ¬μ„± (Tip)

λ°ν‘λ” κ°λ°μ/μ—”μ§€λ‹μ–΄λ¥Ό λ€μƒμΌλ΅ ν•λ―€λ΅ λ‹¤μκ³Ό κ°™μ€ νλ¦„μ„ μ¶”μ²ν•©λ‹λ‹¤.

1.  **Why:** μ™ TDEμΈκ°€? (λ””μ¤ν¬ νƒμ·¨ μ‹ λ°μ΄ν„° λ³΄νΈ, μ»΄ν”λΌμ΄μ–Έμ¤ λ€μ‘)
2.  **How it works:** μ•„ν‚¤ν…μ² λ‹¤μ΄μ–΄κ·Έλ¨ (μ• ν”λ¦¬μΌ€μ΄μ… <-> MariaDB(λ©”λ¨λ¦¬λ” ν‰λ¬Έ) <-> [μ•”νΈν™”/λ³µνΈν™”] <-> λ””μ¤ν¬(μ•”νΈλ¬Έ))
3.  **Demo:** (Phase 1μ—μ„ μ¤€λΉ„ν• ν„°λ―Έλ„ ν™”λ©΄ μΊ΅μ² λλ” λΌμ΄λΈ λ°λ¨)
4.  **Operational Impact:** λ¦¬ν”λ¦¬μΌ€μ΄μ…/κ°λ λΌ κµ¬μ΅°μ—μ„μ ν‚¤ κ΄€λ¦¬ μ „λµ, μ„±λ¥ λ²¤μΉλ§ν¬ κ²°κ³Ό.
5.  **Risk & Constraint:** ν‚¤ νμΌμ„ μƒμ–΄λ²„λ¦¬λ©΄ λ°μ΄ν„° μκµ¬ μ†μ‹¤(κ°€μ¥ μ¤‘μ”), CPU μ‚¬μ©λ‰ μ¦κ°€.

---

### π’΅ μ§€κΈ λ°”λ΅ ν•΄μ•Ό ν•  First Step

**Dockerλ΅ MariaDB λ„μ°κ³  `File Key Management Plugin` μ„¤μ •ν•΄λ³΄κΈ°**μ…λ‹λ‹¤. μ΄κ²ƒλ§ μ„±κ³µν•λ©΄ μ¤‘κ°„ μ κ²€μ€ λ¬΄λ‚ν ν†µκ³Όν•©λ‹λ‹¤.

μ κ°€ **"MariaDB TDE μ„¤μ •μ„ μ„ν• `my.cnf` μμ‹μ™€ Docker Compose νμΌ"**μ„ μ‘μ„±ν•΄ λ“λ¦΄ μ μμµλ‹λ‹¤. μ΄κ±Έλ΅ λ°”λ΅ μ‹¤μµμ„ μ‹μ‘ν•΄ λ³΄μ‹κ² μµλ‹κΉ?

---

λ κ±°μ‹ DBλ¥Ό μ•”νΈν™”ν•΄μ•Ό ν•λ” DBA μ…μ¥μ—μ„ **κ°€μ¥ κ¶κΈν•΄μ•Ό ν•  μ§λ¬Έ**μ€ **'μ„λΉ„μ¤ μν–¥λ„'μ™€ 'μ΄μ μ§€μ† κ°€λ¥μ„±'**μ— μ΄μ μ„ λ§μ¶ λ‹¤μ μ„Έ κ°€μ§€μ…λ‹λ‹¤.

---

## 1. π¨ μ„λΉ„μ¤ μν–¥λ„: λ‹¤μ΄νƒ€μ„μ€ μ–Όλ§λ‚ ν•„μ”ν•κ°€?

λ κ±°μ‹ μ„λΉ„μ¤λ” μΌλ°μ μΌλ΅ 24/7 κ°€λ™λμ–΄μ•Ό ν•λ―€λ΅, μ•”νΈν™” κ³Όμ •μ—μ„ λ°μƒν•λ” **μ„λΉ„μ¤ μ¤‘λ‹¨ μ‹κ°„(λ‹¤μ΄νƒ€μ„)**μ΄ κ°€μ¥ λ―Όκ°ν• λ¬Έμ μ…λ‹λ‹¤.

- **TDE μ μ© μ‹κ°„:** `ALTER TABLE ... ENCRYPTED=YES` λ…λ Ήμ„ μ‹¤ν–‰ν•  λ•, **ν…μ΄λΈ” λ½(Lock)**μ΄ κ±Έλ¦¬λ” μ‹κ°„μ€ μ–Όλ§λ‚ λλ©°, μ΄λ¥Ό **μ¨λΌμΈ DDL λ°©μ‹**μΌλ΅ μµμ†ν™”ν•  μ μλ”κ°€?
  - _κ΄€λ ¨ κ¶κΈμ¦:_ κ°€μ¥ ν° ν…μ΄λΈ” 3κ°μ **μ•”νΈν™” μ „ν™ μμƒ μ‹κ°„**μ€ μ–Όλ§μΈκ°€? (I/O μ„±λ¥ λ¶„μ„ κΈ°λ°)
- **μ„±λ¥ μ €ν•:** μ•”νΈν™” ν”„λ΅μ„Έμ¤(λ””μ¤ν¬ μ“°κΈ°/μ½κΈ°) μ§„ν–‰ μ¤‘ **DB μ„λ²„μ CPU λ° I/O λ¶€ν•**κ°€ μ„λΉ„μ¤ μ„κ³„μΉλ¥Ό λ„μ§€ μ•λ”κ°€?

---

## 2. π’Έ λΉ„μ© λ° μμ› ν¨μ¨μ„±: μ–΄λ–¤ μμ›μ„ μ–Όλ§λ‚ μ¨μ•Ό ν•λ”κ°€?

DBAλ” λ‹¨μν• λ„μ… λΉ„μ© μ™Έμ—λ„ μ΄μμ— ν•„μ”ν• μμ› μ¦κ°€λ¶„μ„ κ¶κΈν•΄ν•΄μ•Ό ν•©λ‹λ‹¤.

- **μ„±λ¥ μ¤λ²„ν—¤λ“:** TDE μ μ© ν›„ μ•”νΈν™”/λ³µνΈν™” κ³Όμ •μΌλ΅ μΈν•΄ **ν‰κ·  μΏΌλ¦¬ μ‘λ‹µ μ‹κ°„(Latency)**μ΄ λ‡ % μ¦κ°€ν•λ”κ°€? (νΉν CPU μ‚¬μ©λ‰)
- **λ””μ¤ν¬ κ³µκ°„:** μ•”νΈν™” μ „ν™ κ³Όμ • μ¤‘ κΈ°μ΅΄ νμΌκ³Ό μƒλ΅μ΄ μ•”νΈν™” νμΌμ΄ μΌμ‹μ μΌλ΅ μ΅΄μ¬ν•΄μ•Ό ν•λ”λ°, ν•„μ”ν• **μµλ€ λ””μ¤ν¬ κ³µκ°„**μ€ ν…μ΄λΈ” ν¬κΈ°μ λ‡ λ°°μΈκ°€?
- **ν‚¤ κ΄€λ¦¬ λΉ„μ©:** ν‚¤ κ΄€λ¦¬ μ†”λ£¨μ…(μ: KMIP μ„λ²„, AWS KMS) λ„μ… μ‹ λ°μƒν•λ” **μ§μ ‘ λΉ„μ© λ° μ μ§€λ³΄μ μΈλ ¥ λΉ„μ©**μ€ μ–Όλ§μΈκ°€?

---

## 3. π›΅οΈ μ΄μ λ° μ¬ν•΄ λ³µκµ¬: λ³΄μ•κ³Ό κ΄€λ¦¬λ” μ–΄λ–»κ² ν•λ”κ°€?

μ•”νΈν™”λ” λ°μ΄ν„°λ¥Ό μ•μ „ν•κ² λ³΄νΈν•λ” λ™μ‹μ—, **λ°μ΄ν„° μ μ‹¤ μ„ν—μ„ μ¦ν­**μ‹ν‚¤λ―€λ΅ λ³µκµ¬ κ³„νμ΄ ν•„μμ μ…λ‹λ‹¤.

- **λ°±μ—…/λ³µκµ¬ μ μ°¨ λ³€κ²½:** μ•”νΈν™”λ ν…μ΄λΈ”μ΄ ν¬ν•¨λ λ°±μ—…μ„ λ³µκµ¬ν•  λ• **μ•”νΈν™” ν‚¤**κ°€ μ–΄λ–»κ² ν•„μ”ν•κ°€? λ°±μ—…/λ³µκµ¬ μ‹λ‚λ¦¬μ¤κ°€ μ–Όλ§λ‚ λ³µμ΅ν•΄μ§€λ”κ°€?
- **ν‚¤ κµμ²΄(Key Rotation) κ³„ν:** λ§μ¤ν„° ν‚¤λ¥Ό μ–Όλ§λ‚ **μμ£Ό, κ·Έλ¦¬κ³  μ–΄λ–»κ²** κµμ²΄ν•΄μ•Ό ν•λ”κ°€? ν‚¤ κµμ²΄ μ‘μ—…μ€ μ„λΉ„μ¤μ— μν–¥μ„ μ£Όμ§€ μ•λ”κ°€?
- **μ ‘κ·Ό ν†µμ :** μ•”νΈν™” ν‚¤ μ ‘κ·Ό κ¶ν•μ„ κ°€μ§„ κ³„μ •/μ‚¬μ©μλ¥Ό **μ–΄λ–»κ² μµμ†ν™”ν•κ³  κ΄€λ¦¬**ν•  κ²ƒμΈκ°€?

> **μ”μ•½:** λ κ±°μ‹ DB μ•”νΈν™”λ” λ‹¨μν `ENCRYPTED=YES`λ¥Ό μ‹¤ν–‰ν•λ” λ¬Έμ κ°€ μ•„λ‹λΌ, **μ΄μ μ¤‘μΈ μ‹μ¤ν…μ„ λ©μ¶”μ§€ μ•κ³ , μ•”νΈν™” ν‚¤λ¥Ό μ•μ „ν•κ² κ΄€λ¦¬ν•λ©°, λ§μ•½μ μ‚¬νƒμ— λ€λΉ„ν• μ™„λ²½ν• λ³µκµ¬ κ³„ν**μ„ μ„Έμ°λ” κ²ƒμ΄ ν•µμ‹¬μ…λ‹λ‹¤.
