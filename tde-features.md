# TDEμ—μ„ μ κ³µν•λ” κΈ°λ¥λ“¤

1. λ°μ΄ν„°λ² μ΄μ¤ λ‚΄μ λ¨λ“  DB ν…μ΄λΈ” κ°•μ  μ•”νΈν™”
2. νΉμ • ν…μ΄λΈ”λ§ μ•”νΈν™”
3. λ‹¨, νΉμ • ν…μ΄λΈ”μ νΉμ • μΉΌλΌμ— λ€ν• μ•”νΈν™”λ” μ§€μ›μ΄ λμ§€ μ•λ”λ‹¤. μ΄λ” μ–΄ν”λ¦¬μΌ€μ΄μ… λ λ²¨μ—μ„ ν•΄μ¤μ•Ό ν•λ‹¤ (ν¬λ…ν•μ§€ μ•μ)

- TDEλ” SELECT κµ¬λ¬Έμ—μ„λ” ν‰λ¬Έμ λ°μ΄ν„°λ¥Ό λ°”λ΅ ν™•μΈν•  μ μμ§€λ§
  μ™Έλ¶€λ΅ λ„μ¶λ ibd (binary) νμΌμ— λ€ν•΄μ„λ” ν™•μΈμ„ λ»ν•κ² λ§‰μ.

---

π” TDEμ ν‚¤ κ³„μΈµ κµ¬μ΅° (Key Hierarchy)

κ³„μΈµ,μ΄λ¦„ (μ—­ν• ),λ„κ°€ μ•”νΈν™”ν•λ”κ°€?,νΉμ§•

1λ‹¨κ³„ (μµμƒμ„),λ§μ¤ν„° ν‚¤ (Master Key),ν‚¤ κ΄€λ¦¬ ν”λ¬κ·ΈμΈ (μ™Έλ¶€ λΉ„λ°€λ²νΈ νμΌ μ‚¬μ©),μ„λ²„κ°€ μ‹μ‘λ  λ• λ©”λ¨λ¦¬μ— λ΅λ“λλ” μµμƒμ„ ν‚¤μ…λ‹λ‹¤.

2λ‹¨κ³„ (μ¤‘κ°„),ν…μ΄λΈ”μ¤νμ΄μ¤ ν‚¤ (Tablespace Key),λ§μ¤ν„° ν‚¤,"κ° .ibd νμΌ(ν…μ΄λΈ”)λ§λ‹¤ μƒμ„±λλ©°, ν•΄λ‹Ή νμΌμ ν‚¤λ¥Ό μ•”νΈν™”ν•©λ‹λ‹¤."

3λ‹¨κ³„ (μµν•μ„),νμ΄μ§€ ν‚¤ (Page Key),ν…μ΄λΈ”μ¤νμ΄μ¤ ν‚¤,μ‹¤μ λ΅ λ°μ΄ν„°λ¥Ό λ‹΄κ³  μλ” InnoDB νμ΄μ§€(16KB λΈ”λ΅)λ¥Ό μ•”νΈν™”ν•©λ‹λ‹¤.

π“‚ file_key_management ν”λ¬κ·ΈμΈ μƒμ„Έ
ν„μ¬ μ‚¬μ©ν•μ‹  file_key_management ν”λ¬κ·ΈμΈμ€ κ°€μ¥ λ‹¨μν• ν•νƒμ ν‚¤ κ΄€λ¦¬ λ°©μ‹μ…λ‹λ‹¤.

μ €μ¥ λ°©μ‹: λ§μ¤ν„° ν‚¤λ¥Ό **file_key_management_filename**μ— μ§€μ •λ μΌλ° νμΌ(keys.enc)μ— μ €μ¥ν•©λ‹λ‹¤.

ν‚¤ λ³΄νΈ: μ΄ keys.enc νμΌμ€ λ‹¤μ‹ **file_key_management_filekey**μ— μ§€μ •λ λΉ„λ°€λ²νΈ νμΌμ λ‚΄μ©μΌλ΅ μ•”νΈν™”λ©λ‹λ‹¤.

μ·¨μ•½μ : λ§μ•½ κ³µκ²©μκ°€ DB λ°μ΄ν„° (.ibd νμΌ), μ•”νΈν™”λ λ§μ¤ν„° ν‚¤ νμΌ (keys.enc), κ·Έλ¦¬κ³  λ§μ¤ν„° ν‚¤λ¥Ό λ³΄νΈν•λ” μ™Έλ¶€ λΉ„λ°€λ²νΈ νμΌκΉμ§€ μ„Έ κ°€μ§€ λ¨λ‘λ¥Ό νƒμ·¨ν•λ‹¤λ©΄ μ•”νΈν™”κ°€ λ«λ¦΄ μ μμµλ‹λ‹¤.

μ°Έκ³ : λ€κ·λ¨ μ΄μ ν™κ²½μ—μ„λ” file_key_management λ€μ‹  **KMIP (Key Management Interoperability Protocol)**λ¥Ό μ§€μ›ν•λ” **ν•λ“μ›¨μ–΄ λ³΄μ• λ¨λ“(HSM)**μ΄λ‚ ν΄λΌμ°λ“ ν‚¤ κ΄€λ¦¬ μ„λΉ„μ¤μ™€ μ—°λ™ν•λ” ν”λ¬κ·ΈμΈμ„ μ‚¬μ©ν•μ—¬ λ§μ¤ν„° ν‚¤λ¥Ό DB μ„λ²„ μ™Έλ¶€μ— μ €μ¥ν•λ” κ²ƒμ΄ μΌλ°μ μ…λ‹λ‹¤.

---
